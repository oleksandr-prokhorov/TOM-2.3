
--  #  Hunting system by royclapton #
--  #         version: 1.0          #

-- EXP
HUNTEXP_SCAVENGER = 25;
HUNTEXP_WOLF = 25;
HUNTEXP_WARG = 50;
HUNTEXP_SHADOWBEAST = 100;
HUNTEXP_TROLL = 100;
HUNTEXP_KEILER = 25;
HUNTEXP_MOLERAT = 25;
HUNTEXP_MEATBUG = 5;
HUNTEXP_GIANT_BUG = 50;
HUNTEXP_BLOODFLY = 50;
HUNTEXP_SNAPPER = 25;
HUNTEXP_SWAMPSHARK = 100;
HUNTEXP_WARAN = 25;
HUNTEXP_GIANT_RAT = 25;
HUNTEXP_MINECRAWLER = 50;
HUNTEXP_LURKER = 50;

-- ENERGY
HUNTENER_SCAVENGER = 25;
HUNTENER_WOLF = 25;
HUNTENER_WARG = 50;
HUNTENER_MOLERAT = 25;
HUNTENER_MEATBUG = 5;
HUNTENER_GIANT_BUG = 50;
HUNTENER_BLOODFLY = 50;
HUNTENER_KEILER = 25;
HUNTENER_SNAPPER = 25;
HUNTENER_SWAMPSHARK = 100;
HUNTENER_SHADOWBEAST = 100;
HUNTENER_TROLL = 100;
HUNTENER_WARAN = 25;
HUNTENER_GIANT_RAT = 25;
HUNTENER_MINECRAWLER = 50;
HUNTENER_LURKER = 50;

-- drops
SCAVENGER_DROPLIST_NOSKILL = {"ZDPWLA_ITFOMUTTONRAW"}
SCAVENGER_DROPLIST_1 = {"ZDPWLA_ITFOMUTTONRAW", "ZDPWLA_ITFO_EGG"}
SCAVENGER_DROPLIST_2 = {"ZDPWLA_ITFOMUTTONRAW", "ZDPWLA_ITFO_EGG"}
SCAVENGER_DROPLIST_3 = {"ZDPWLA_ITFOMUTTONRAW", "ZDPWLA_ITFO_EGG"}

WOLF_DROPLIST_NOSKILL = {"ZDPWLA_ITFOMUTTONRAW"}
WOLF_DROPLIST_1 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_WOLFFUR"}
WOLF_DROPLIST_2 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_WOLFFUR"}
WOLF_DROPLIST_3 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_WOLFFUR"}

WARG_DROPLIST_NOSKILL = {"ZDPWLA_ITFOMUTTONRAW"}
WARG_DROPLIST_1 = {"ZDPWLA_ITFOMUTTONRAW"}
WARG_DROPLIST_2 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_WARGFUR"}
WARG_DROPLIST_3 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_WARGFUR"}

MOLERAT_DROPLIST_NOSKILL = {"ZDPWLA_ITFOMUTTONRAW"}
MOLERAT_DROPLIST_1 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_FAT"}
MOLERAT_DROPLIST_2 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_FAT"}
MOLERAT_DROPLIST_3 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_FAT"}

MEATBUG_DROPLIST_NOSKILL = {"OOLTYB_ITAT_MEATBUGFLESH"}
MEATBUG_DROPLIST_1 = {"OOLTYB_ITAT_MEATBUGFLESH"}
MEATBUG_DROPLIST_2 = {"OOLTYB_ITAT_MEATBUGFLESH"}
MEATBUG_DROPLIST_3 = {"OOLTYB_ITAT_MEATBUGFLESH"}

BLOODFLY_DROPLIST_NOSKILL = {"OOLTYB_ITAT_STING"}
BLOODFLY_DROPLIST_1 = {"OOLTYB_ITAT_STING", "OOLTYB_ITAT_WING"}
BLOODFLY_DROPLIST_2 = {"OOLTYB_ITAT_STING", "OOLTYB_ITAT_WING"}
BLOODFLY_DROPLIST_3 = {"OOLTYB_ITAT_STING", "OOLTYB_ITAT_WING"}

KEILER_DROPLIST_NOSKILL = {"ZDPWLA_ITFOMUTTONRAW"}
KEILER_DROPLIST_1 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_WOLFFUR"}
KEILER_DROPLIST_2 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_WOLFFUR"}
KEILER_DROPLIST_3 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_WOLFFUR"}

SNAPPER_DROPLIST_NOSKILL = {"ZDPWLA_ITFOMUTTONRAW"}
SNAPPER_DROPLIST_1 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_LURKERSKIN"}
SNAPPER_DROPLIST_2 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_LURKERSKIN"}
SNAPPER_DROPLIST_3 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_LURKERSKIN"}

SHADOWBEAST_DROPLIST_NOSKILL = {"ZDPWLA_ITFOMUTTONRAW"}
SHADOWBEAST_DROPLIST_1 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_SHADOWFUR"}
SHADOWBEAST_DROPLIST_2 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_SHADOWFUR"}
SHADOWBEAST_DROPLIST_3 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_SHADOWFUR"}

TROLL_DROPLIST_NOSKILL = {"ZDPWLA_ITFOMUTTONRAW"}
TROLL_DROPLIST_1 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_TROLLFUR"}
TROLL_DROPLIST_2 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_TROLLFUR"}
TROLL_DROPLIST_3 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_TROLLFUR"}

WARAN_DROPLIST_NOSKILL = {"ZDPWLA_ITFOMUTTONRAW"}
WARAN_DROPLIST_1 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_LURKERSKIN"}
WARAN_DROPLIST_2 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_LURKERSKIN"}
WARAN_DROPLIST_3 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_LURKERSKIN"}

GIANT_RAT_DROPLIST_NOSKILL = {"ZDPWLA_ITFOMUTTONRAW"}
GIANT_RAT_DROPLIST_1 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_LURKERSKIN"}
GIANT_RAT_DROPLIST_2 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_LURKERSKIN"}
GIANT_RAT_DROPLIST_3 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_LURKERSKIN"}

MINECRAWLER_DROPLIST_NOSKILL = {"OOLTYB_ITAT_CRAWLERMANDIBLES"}
MINECRAWLER_DROPLIST_1 = {"OOLTYB_ITAT_CRAWLERMANDIBLES", "OOLTYB_ITAT_CRAWLERPLATE"}
MINECRAWLER_DROPLIST_2 = {"OOLTYB_ITAT_CRAWLERMANDIBLES", "OOLTYB_ITAT_CRAWLERPLATE"}
MINECRAWLER_DROPLIST_3 = {"OOLTYB_ITAT_CRAWLERMANDIBLES", "OOLTYB_ITAT_CRAWLERPLATE"}

LURKER_DROPLIST_NOSKILL = {"ZDPWLA_ITFOMUTTONRAW"}
LURKER_DROPLIST_1 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_LURKERSKIN"}
LURKER_DROPLIST_2 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_LURKERSKIN"}
LURKER_DROPLIST_3 = {"ZDPWLA_ITFOMUTTONRAW", "OOLTYB_ITAT_LURKERSKIN"}

local SKINNINGSOUND = CreateSound("huntercut_01.wav");

DROP_POINT = {};
for i = 1, 300 do

	DROP_POINT[i] = {};
	DROP_POINT[i].vob = nil;
	DROP_POINT[i].status = 0; -- (0:no / 1:inbase / 2:skinning / 3:createvob)
	DROP_POINT[i].pos = {};
	DROP_POINT[i].fromMob = nil;
	DROP_POINT[i].dropTime = nil;
	DROP_POINT[i].id = nil;

end

-- params for visual, Y
HUNT_WOLF_PARAMS = {"MYASO.3DS", 80}
HUNT_WARG_PARAMS = {"MYASO.3DS", 80}
HUNT_SHADOWBEAST_PARAMS = {"MYASO.3DS", 80}
HUNT_TROLL_PARAMS = {"MYASO.3DS", 80}
HUNT_BEAR_PARAMS = {"MYASO.3DS", 80}
HUNT_KEILER_PARAMS = {"MYASO.3DS", 80}

-- delete bodies var
HUNT_REMOVE = false;

-- exps
HUNTING_EXPTOLEVELS = {1000, 2000};

local WORLD = "KOLONIE.ZEN"


function _huntingConnect(id)

	Player[id].hzero_size_h = 3021;
	Player[id].hstart_size_h = 5216;
	Player[id].hcurrent_size_h = 5216;
	Player[id].hprog_background_h = CreateTexture(2565, 7045, 5619, 7625, 'c_progress')
	Player[id].hprog_h = CreateTexture(2991, 7080, Player[id].hstart_size_h, 7560, 'c_progress_bar')
	Player[id].g_timer = nil;

	Player[id].hunting = false;
	Player[id].huntlevel = 0;
	Player[id].huntexpn = 0;
	Player[id].huntexp = 0;

	Player[id].huntpoint = nil;
	Player[id].huntdraws = {};
	Player[id].huntdraws[1] = CreatePlayerDraw(id, 0, 0, "")
	Player[id].huntdraws[2] = CreatePlayerDraw(id, 0, 0, "");

end

function _updateHuntingDraws(id)

	for i, v in ipairs(HUNTING_EXPTOLEVELS) do
		if Player[id].huntlevel == i then
			Player[id].huntexpn = v;
		end
	end

	local level = string.format("%s%d%s","Уровень навыка: ",Player[id].huntlevel,"ур.")
	UpdatePlayerDraw(id, Player[id].huntdraws[1], 6850, 6680, level, "Font_Old_10_White_Hi.TGA", 255, 255, 255);
	local exp = string.format("%s%d%s%d%s","Опыт: ",Player[id].huntexp,"/",Player[id].huntexpn,".")
	UpdatePlayerDraw(id, Player[id].huntdraws[2], 6850, 6880, exp, "Font_Old_10_White_Hi.TGA", 255, 255, 255);

end

function UpdateHuntLevel(playerid)

	if Player[playerid].huntexp >= Player[playerid].huntexpn then

		if Player[playerid].huntlevel == 1 or Player[playerid].huntlevel == 2 then
			Player[playerid].huntlevel = Player[playerid].huntlevel + 1; Player[playerid].huntexp = 0;
			if Player[playerid].huntlevel == 3 then
				Player[playerid].huntexp = 0;
			end
			SendPlayerMessage(playerid, 255, 255, 255, "Навык охотника повышен до "..Player[playerid].huntlevel);
			SaveHunt(playerid);
		end
	end

	_updateHuntingDraws(playerid);

end

function Hunting(playerid)

	if Player[playerid].loggedIn == true then
		if Player[playerid].hunting == false then
			Player[playerid].hunting = true;
			SendPlayerMessage(playerid, 255, 255, 255, "Чтобы разделать убитого монстра - нажмите G.")
			GameTextForPlayer(playerid, 50, 6000, "Вы вошли в режим охоты.","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
			for i = 1, table.getn(Player[playerid].huntdraws) do
				ShowPlayerDraw(playerid, Player[playerid].huntdraws[i]);
			end
			_updateHuntingDraws(playerid);
		else
			Player[playerid].hunting = false;
			GameTextForPlayer(playerid, 50, 6000, "Вы вышли из режима охоты.","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
			for i = 1, table.getn(Player[playerid].huntdraws) do
				HidePlayerDraw(playerid, Player[playerid].huntdraws[i]);
			end
		end
	end

end
addCommandHandler({"/охота", "/hunt"}, Hunting);

local itxasdqwefdsfqas = CreateTexture(5620, 3957, 8184, 4457, 'menu_ingame')
function EnergyLowInfo(playerid)
	GameTextForPlayer(playerid, 50, 6000, "Недостаточно энергии для разделки","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
end

function LogHunt(id, botType, bSuc, bExp, dItem1, dItem2, dItem3)

	local time = os.date('*t');
	local ryear = time.year;
	local rmonth = time.month;
	local rday = time.day;
	local rhour = string.format("%02d", time.hour);
	local rminute = string.format("%02d", time.min);
	
	local bot;
	if botType == "SCAVENGER" then
		bot = "падальщик";
	elseif botType == "WOLF" then
		bot = "волк";
	elseif botType == "WARG" then
		bot = "варг";
	elseif botType == "MOLERAT" then
		bot = "Кротокрыс";
	elseif botType == "MEATBUG" then
		bot = "Мясной жук";
	elseif botType == "GIANT_BUG" then
		bot = "Полевой жук";
	elseif botType == "BLOODFLY" then
		bot = "Кровавая муха";
	elseif botType == "KEILER" then
		bot = "Кабан";
	elseif botType == "SNAPPER" then
		bot = "Глорх"; 
	elseif botType == "SWAMPSHARK" then
		bot = "Болотожор";
	elseif botType == "SHADOWBEAST" then
		bot = "Мракорис";
	elseif botType == "TROLL" then
		bot = "Тролль";
	elseif botType == "WARAN" then
		bot = "Ящерица";
	elseif botType == "GIANT_RAT" then
		bot = "Крыса";
	elseif botType == "MINECRAWLER" then
		bot = "Ползун";
	end


	
	local item1, item2, item3;
	if dItem1 then
		item1 = dItem1;
	else
		item1 = " ";
	end
	
	if dItem2 then
		item2 = dItem2;
	else
		item2 = " ";
	end
	
	if dItem3 then
		item3 = dItem3;
	else
		item3 = " ";
	end
	
	local ch;
	if bSuc == true then
		ch = "успешно";
	else
		ch = "неудачно";
	end
	
	--local txt = GetPlayerName(id).." убил бота "..bot.."("..ch..") / Получено: "..bExp.."/ „роп: "..item1..", "..item2;
	
	--LogString("Logs/Hunt/Hunt.txt", "("..rhour..":"..rminute.." "..rday.."."..rmonth.."."..ryear..") "..txt);

end


function _inst(id) 
	return GetPlayerInstance(id); 
end

function _checkNick(ida, idb)
	if GetPlayerName(ida) == GetPlayerName(idb) then
		return true;
	else
		return false;
	end
end

function _deathMonster(id, killer)
	
	if _checkNick(id, killer) == false and Player[killer].hunting == true and IsNPC(id) == 1 then

		if _inst(id) == "WOLF" then
			
			local x, y, z = GetPlayerPos(id);
			for i = 1, 300 do
				if DROP_POINT[i].status < 1 then
					DROP_POINT[i].status = 1;
					DROP_POINT[i].pos = {x, y, z};
					DROP_POINT[i].fromMob = "WOLF";
					DROP_POINT[i].id = id;
					break
				end
			end

		elseif _inst(id) == "WARG" then
			
			local x, y, z = GetPlayerPos(id);
			for i = 1, 300 do
				if DROP_POINT[i].status < 1 then
					DROP_POINT[i].status = 1;
					DROP_POINT[i].pos = {x, y, z};
					DROP_POINT[i].fromMob = "WARG";
					DROP_POINT[i].id = id;
					break
				end
			end

		elseif _inst(id) == "SHADOWBEAST" then
			
			local x, y, z = GetPlayerPos(id);
			for i = 1, 300 do
				if DROP_POINT[i].status < 1 then
					DROP_POINT[i].status = 1;
					DROP_POINT[i].pos = {x, y, z};
					DROP_POINT[i].fromMob = "SHADOWBEAST";
					DROP_POINT[i].id = id;
					break
				end
			end

		elseif _inst(id) == "KEILER" then
			
			local x, y, z = GetPlayerPos(id);
			for i = 1, 300 do
				if DROP_POINT[i].status < 1 then
					DROP_POINT[i].status = 1;
					DROP_POINT[i].pos = {x, y, z};
					DROP_POINT[i].fromMob = "KEILER";
					DROP_POINT[i].id = id;
					break
				end
			end

		elseif _inst(id) == "TROLL" then
			
			local x, y, z = GetPlayerPos(id);
			for i = 1, 300 do
				if DROP_POINT[i].status < 1 then
					DROP_POINT[i].status = 1;
					DROP_POINT[i].pos = {x, y, z};
					DROP_POINT[i].fromMob = "TROLL";
					DROP_POINT[i].id = id;
					break
				end
			end

		elseif _inst(id) == "MOLERAT" then
			
			local x, y, z = GetPlayerPos(id);
			for i = 1, 300 do
				if DROP_POINT[i].status < 1 then
					DROP_POINT[i].status = 1;
					DROP_POINT[i].pos = {x, y, z};
					DROP_POINT[i].fromMob = "MOLERAT";
					DROP_POINT[i].id = id;
					break
				end
			end

		elseif _inst(id) == "MEATBUG" then
			
			local x, y, z = GetPlayerPos(id);
			for i = 1, 300 do
				if DROP_POINT[i].status < 1 then
					DROP_POINT[i].status = 1;
					DROP_POINT[i].pos = {x, y, z};
					DROP_POINT[i].fromMob = "MEATBUG";
					DROP_POINT[i].id = id;
					break
				end
			end

		elseif _inst(id) == "BLOODFLY" then
			
			local x, y, z = GetPlayerPos(id);
			for i = 1, 300 do
				if DROP_POINT[i].status < 1 then
					DROP_POINT[i].status = 1;
					DROP_POINT[i].pos = {x, y, z};
					DROP_POINT[i].fromMob = "BLOODFLY";
					DROP_POINT[i].id = id;
					break
				end
			end


		elseif _inst(id) == "SNAPPER" then
			
			local x, y, z = GetPlayerPos(id);
			for i = 1, 300 do
				if DROP_POINT[i].status < 1 then
					DROP_POINT[i].status = 1;
					DROP_POINT[i].pos = {x, y, z};
					DROP_POINT[i].fromMob = "SNAPPER";
					DROP_POINT[i].id = id;
					break
				end
			end


		elseif _inst(id) == "WARAN" then
			
			local x, y, z = GetPlayerPos(id);
			for i = 1, 300 do
				if DROP_POINT[i].status < 1 then
					DROP_POINT[i].status = 1;
					DROP_POINT[i].pos = {x, y, z};
					DROP_POINT[i].fromMob = "WARAN";
					DROP_POINT[i].id = id;
					break
				end
			end

		elseif _inst(id) == "GIANT_RAT" then
			
			local x, y, z = GetPlayerPos(id);
			for i = 1, 300 do
				if DROP_POINT[i].status < 1 then
					DROP_POINT[i].status = 1;
					DROP_POINT[i].pos = {x, y, z};
					DROP_POINT[i].fromMob = "GIANT_RAT";
					DROP_POINT[i].id = id;
					break
				end
			end

		elseif _inst(id) == "MINECRAWLER" then
			
			local x, y, z = GetPlayerPos(id);
			for i = 1, 300 do
				if DROP_POINT[i].status < 1 then
					DROP_POINT[i].status = 1;
					DROP_POINT[i].pos = {x, y, z};
					DROP_POINT[i].fromMob = "MINECRAWLER";
					DROP_POINT[i].id = id;
					break
				end
			end

		elseif _inst(id) == "LURKER" then
			
			local x, y, z = GetPlayerPos(id);
			for i = 1, 300 do
				if DROP_POINT[i].status < 1 then
					DROP_POINT[i].status = 1;
					DROP_POINT[i].pos = {x, y, z};
					DROP_POINT[i].fromMob = "LURKER";
					DROP_POINT[i].id = id;
					break
				end
			end

		elseif _inst(id) == "SCAVENGER" then
			
			local x, y, z = GetPlayerPos(id);
			for i = 1, 300 do
				if DROP_POINT[i].status < 1 then
					DROP_POINT[i].status = 1;
					DROP_POINT[i].pos = {x, y, z};
					DROP_POINT[i].fromMob = "SCAVENGER";
					DROP_POINT[i].id = id;
					break
				end
			end

		end
	end
end


function _cmdSkinning(id)

	local x, y, z = GetPlayerPos(id);
	for i = 1, 300 do
		if DROP_POINT[i].status == 1 then
			local checkPositions = GetDistance3D(x, y, z, DROP_POINT[i].pos[1], DROP_POINT[i].pos[2], DROP_POINT[i].pos[3]);
			if checkPositions < 150 then
				if Player[id].hunting == true then
					if DROP_POINT[i].status < 2 then
						Player[id].huntpoint = i;
						DROP_POINT[i].status = 2;
						ShowTexture(id, Player[id].hprog_background_h);
						ShowTexture(id, Player[id].hprog_h);
						Player[id].g_timer = SetTimerEx("_skinning", 40, 1, id);
						SetDefaultCamera(id);
						_newSetCameraBeforePlayer(id, 50);
						Freeze(id);
						PlayAnimation(id, "T_CHESTBIG_STAND_2_S0");
						SetTimerEx("freezeCameraTimer", 300, 0, id);
						PlayPlayerSound(id, SKINNINGSOUND);
						break
					end
				end
			end
		end
	end
end
addCommandHandler({"/skinning", "/шкура"}, _cmdSkinning);


function _huntKey(id, down, up)

	if Player[id].loggedIn == true and Player[id].hunting == true then
		if down == KEY_G then
			_mGetOnline();
			if ONLINE > 9 then
				_cmdSkinning(id);
			else
				SendPlayerMessage(id, 255, 255, 255, "Разделывать монстров можно только при онлайне в 10+ человек.")
			end
		end
	end

end

function _skinning(id)

	if Player[id].hcurrent_size_h > Player[id].hzero_size_h then
		Player[id].hcurrent_size_h = Player[id].hcurrent_size_h - 20;
		UpdateTexture(Player[id].hprog_h, 2991, 7080, Player[id].hcurrent_size_h, 7560, 'c_progress_bar');
	else
		KillTimer(Player[id].g_timer);
		UpdateTexture(Player[id].hprog_h, 2991, 7080, Player[id].hstart_size_h, 7560, 'c_progress_bar');
		Player[id].hcurrent_size_h = Player[id].hstart_size_h;
		Player[id].g_timer = nil;

		HideTexture(id, Player[id].hprog_h)
		HideTexture(id, Player[id].hprog_background_h);

		FreezeCamera(id, 0);
		SetDefaultCamera(id);
		UnFreeze(id);
		PlayAnimation(id, "S_CHESTBIG_S0");
		PlayAnimation(id, "T_CHESTBIG_S0_2_STAND");

		local cell = Player[id].huntpoint;
		DROP_POINT[cell].status = 3;

		if DROP_POINT[cell].fromMob == "WOLF" then
			if Player[id].energy >= HUNTENER_WOLF then

				if Player[id].huntlevel == 0 then
					Player[id].energy = Player[id].energy - HUNTENER_WOLF;
					UpdateEnergyBar(id);
					SavePlayer(id);
					local drop = math.random(1,2); -- рандомим, получит ли игрок дроп, или нет
					if drop == 1 then
						LogHunt(id, "WOLF", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255, 0, 0, 3000);
					else
						CreateItem(WOLF_DROPLIST_NOSKILL[1], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу волка","Font_Old_10_White_Hi.TGA", 218, 165, 32, 3000);
						LogHunt(id, "WOLF", true, 0, WOLF_DROPLIST_NOSKILL[1]);
					end

				elseif Player[id].huntlevel == 1 then

					Player[id].energy = Player[id].energy - HUNTENER_WOLF;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop <= 3 then
						LogHunt(id, "WOLF", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						DestroyNPC(DROP_POINT[cell].id);
						DROP_POINT[cell].vob = Vob.Create(HUNT_WOLF_PARAMS[1], WORLD, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]-HUNT_WOLF_PARAMS[2], DROP_POINT[cell].pos[3]);
						Vob.SetCollision(DROP_POINT[cell].vob, 0)
						CreateItem(WOLF_DROPLIST_1[1], 3, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(WOLF_DROPLIST_1[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу волка","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_WOLF;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "WOLF", true, HUNTEXP_WOLF, WOLF_DROPLIST_1[1], WOLF_DROPLIST_1[2]);

				elseif Player[id].huntlevel == 2 then 

					Player[id].energy = Player[id].energy - HUNTENER_WOLF;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop == 1 then
						LogHunt(id, "WOLF", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						DestroyNPC(DROP_POINT[cell].id);
						DROP_POINT[cell].vob = Vob.Create(HUNT_WOLF_PARAMS[1], WORLD, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]-HUNT_WOLF_PARAMS[2], DROP_POINT[cell].pos[3]);
						Vob.SetCollision(DROP_POINT[cell].vob, 0)
						CreateItem(WOLF_DROPLIST_2[1], 5, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(WOLF_DROPLIST_2[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу волка","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_WOLF;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "WOLF", true, HUNTEXP_WOLF, WOLF_DROPLIST_2[1], WOLF_DROPLIST_2[2]);
					----------------------------------------------------------------------------------------------------

				elseif Player[id].huntlevel == 3 then
					DestroyNPC(DROP_POINT[cell].id);
					Player[id].energy = Player[id].energy - HUNTENER_WOLF;
					UpdateEnergyBar(id);
					DROP_POINT[cell].vob = Vob.Create(HUNT_WOLF_PARAMS[1], WORLD, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]-HUNT_WOLF_PARAMS[2], DROP_POINT[cell].pos[3]);
					Vob.SetCollision(DROP_POINT[cell].vob, 0)
					CreateItem(WOLF_DROPLIST_3[1], 7, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					CreateItem(WOLF_DROPLIST_3[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					GameTextForPlayer(id, 50, 6000, "Вы разделали тушу волка","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					SavePlayer(id);
					LogHunt(id, "WOLF", true, 0, WOLF_DROPLIST_3[1], WOLF_DROPLIST_3[2], WOLF_DROPLIST_3[3]);
				end
			else
				EnergyLowInfo(id);
			end

		elseif DROP_POINT[cell].fromMob == "SCAVENGER" then
			if Player[id].energy >= HUNTENER_SCAVENGER then

				if Player[id].huntlevel == 0 then
					Player[id].energy = Player[id].energy - HUNTENER_SCAVENGER;
					UpdateEnergyBar(id);
					SavePlayer(id);
					local drop = math.random(1,2);
					if drop == 1 then
						LogHunt(id, "SCAVENGER", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255, 0, 0, 3000);
					else
						CreateItem(SCAVENGER_DROPLIST_NOSKILL[1], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу падальщика","Font_Old_10_White_Hi.TGA", 218, 165, 32, 3000);
						LogHunt(id, "SCAVENGER", true, 0, SCAVENGER_DROPLIST_NOSKILL[1]);
					end

				elseif Player[id].huntlevel == 1 then

					Player[id].energy = Player[id].energy - HUNTENER_SCAVENGER;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop <= 3 then
						LogHunt(id, "SCAVENGER", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(SCAVENGER_DROPLIST_1[1], 4, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(SCAVENGER_DROPLIST_1[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу падальщика","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_SCAVENGER;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "SCAVENGER", true, HUNTEXP_SCAVENGER, SCAVENGER_DROPLIST_1[1], SCAVENGER_DROPLIST_1[2]);

				elseif Player[id].huntlevel == 2 then 

					Player[id].energy = Player[id].energy - HUNTENER_SCAVENGER;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop == 1 then
						LogHunt(id, "SCAVENGER", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(SCAVENGER_DROPLIST_2[1], 6, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(SCAVENGER_DROPLIST_2[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу падальщика","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_SCAVENGER;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "SCAVENGER", true, HUNTEXP_SCAVENGER, SCAVENGER_DROPLIST_2[1], SCAVENGER_DROPLIST_2[2]);

				elseif Player[id].huntlevel == 3 then
					Player[id].energy = Player[id].energy - HUNTENER_SCAVENGER;
					UpdateEnergyBar(id);
					CreateItem(SCAVENGER_DROPLIST_3[1], 8, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					CreateItem(SCAVENGER_DROPLIST_3[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					GameTextForPlayer(id, 50, 6000, "Вы разделали тушу падальщика","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					SavePlayer(id);
					LogHunt(id, "SCAVENGER", true, 0, SCAVENGER_DROPLIST_3[1], SCAVENGER_DROPLIST_3[2], SCAVENGER_DROPLIST_3[3]);
				end
			else
				EnergyLowInfo(id);
			end

		elseif DROP_POINT[cell].fromMob == "WARG" then
			if Player[id].energy >= HUNTENER_WARG then

				if Player[id].huntlevel == 0 then
					Player[id].energy = Player[id].energy - HUNTENER_WARG;
					UpdateEnergyBar(id);
					SavePlayer(id);
					local drop = math.random(1,2);
					if drop == 1 then
						LogHunt(id, "WARG", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255, 0, 0, 3000);
					else
						CreateItem(WARG_DROPLIST_NOSKILL[1], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу варга","Font_Old_10_White_Hi.TGA", 218, 165, 32, 3000);
						LogHunt(id, "WARG", true, 0, WARG_DROPLIST_NOSKILL[1]);
					end

				elseif Player[id].huntlevel == 1 then

					Player[id].energy = Player[id].energy - HUNTENER_WARG;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop <= 3 then
						LogHunt(id, "WARG", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						DestroyNPC(DROP_POINT[cell].id);
						DROP_POINT[cell].vob = Vob.Create(HUNT_WARG_PARAMS[1], WORLD, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]-HUNT_WARG_PARAMS[2], DROP_POINT[cell].pos[3]);
						Vob.SetCollision(DROP_POINT[cell].vob, 0)
						CreateItem(WARG_DROPLIST_1[1], 3, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу варга","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_WARG;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "WARG", true, HUNTEXP_WARG, WARG_DROPLIST_1[1], WARG_DROPLIST_1[2]);

				elseif Player[id].huntlevel == 2 then 

					Player[id].energy = Player[id].energy - HUNTENER_WARG;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop == 1 then
						LogHunt(id, "WARG", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						DestroyNPC(DROP_POINT[cell].id);
						DROP_POINT[cell].vob = Vob.Create(HUNT_WARG_PARAMS[1], WORLD, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]-HUNT_WARG_PARAMS[2], DROP_POINT[cell].pos[3]);
						Vob.SetCollision(DROP_POINT[cell].vob, 0)
						CreateItem(WARG_DROPLIST_2[1], 5, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(WARG_DROPLIST_2[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу варга","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_WARG;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "WARG", true, HUNTEXP_WARG, WARG_DROPLIST_NOSKILL[1], WARG_DROPLIST_NOSKILL[2]);
					----------------------------------------------------------------------------------------------------

				elseif Player[id].huntlevel == 3 then
					DestroyNPC(DROP_POINT[cell].id);
					Player[id].energy = Player[id].energy - HUNTENER_WARG;
					UpdateEnergyBar(id);
					DROP_POINT[cell].vob = Vob.Create(HUNT_WARG_PARAMS[1], WORLD, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]-HUNT_WARG_PARAMS[2], DROP_POINT[cell].pos[3]);
					Vob.SetCollision(DROP_POINT[cell].vob, 0)
					CreateItem(WARG_DROPLIST_3[1], 7, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					CreateItem(WARG_DROPLIST_3[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					GameTextForPlayer(id, 50, 6000, "Вы разделали тушу варга","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					SavePlayer(id);
					LogHunt(id, "WARG", true, 0, WARG_DROPLIST_3[1], WARG_DROPLIST_3[2], WARG_DROPLIST_3[3]);
				end
			else
				EnergyLowInfo(id);
			end

		elseif DROP_POINT[cell].fromMob == "TROLL" then
			if Player[id].energy >= HUNTENER_TROLL then

				if Player[id].huntlevel == 0 then
					Player[id].energy = Player[id].energy - HUNTENER_TROLL;
					UpdateEnergyBar(id);
					SavePlayer(id);
					local drop = math.random(1,2);
					if drop == 1 then
						LogHunt(id, "TROLL", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255, 0, 0, 3000);
					else
						CreateItem(TROLL_DROPLIST_NOSKILL[1], 10, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу тролля","Font_Old_10_White_Hi.TGA", 218, 165, 32, 3000);
						LogHunt(id, "TROLL", true, 0, TROLL_DROPLIST_NOSKILL[1]);
					end

				elseif Player[id].huntlevel == 1 then

					Player[id].energy = Player[id].energy - HUNTENER_TROLL;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop <= 3 then
						LogHunt(id, "TROLL", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						DestroyNPC(DROP_POINT[cell].id);
						DROP_POINT[cell].vob = Vob.Create(HUNT_TROLL_PARAMS[1], WORLD, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]-HUNT_TROLL_PARAMS[2], DROP_POINT[cell].pos[3]);
						Vob.SetCollision(DROP_POINT[cell].vob, 0)
						CreateItem(TROLL_DROPLIST_1[1], 16, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу тролля","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_TROLL;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "TROLL", true, HUNTEXP_TROLL, TROLL_DROPLIST_1[1], TROLL_DROPLIST_1[2]);

				elseif Player[id].huntlevel == 2 then 

					Player[id].energy = Player[id].energy - HUNTENER_TROLL;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop == 1 then
						LogHunt(id, "TROLL", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						DestroyNPC(DROP_POINT[cell].id);
						DROP_POINT[cell].vob = Vob.Create(HUNT_TROLL_PARAMS[1], WORLD, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]-HUNT_TROLL_PARAMS[2], DROP_POINT[cell].pos[3]);
						Vob.SetCollision(DROP_POINT[cell].vob, 0)
						CreateItem(TROLL_DROPLIST_2[1], 24, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)	
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу тролля","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_TROLL;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "TROLL", true, HUNTEXP_TROLL, TROLL_DROPLIST_NOSKILL[1], TROLL_DROPLIST_NOSKILL[2]);
					----------------------------------------------------------------------------------------------------

				elseif Player[id].huntlevel == 3 then
					DestroyNPC(DROP_POINT[cell].id);
					Player[id].energy = Player[id].energy - HUNTENER_TROLL;
					UpdateEnergyBar(id);
					DROP_POINT[cell].vob = Vob.Create(HUNT_TROLL_PARAMS[1], WORLD, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]-HUNT_TROLL_PARAMS[2], DROP_POINT[cell].pos[3]);
					Vob.SetCollision(DROP_POINT[cell].vob, 0)
					CreateItem(TROLL_DROPLIST_3[1], 30, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					CreateItem(TROLL_DROPLIST_3[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					GameTextForPlayer(id, 50, 6000, "Вы разделали тушу тролля","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					SavePlayer(id);
					LogHunt(id, "TROLL", true, 0, TROLL_DROPLIST_3[1], TROLL_DROPLIST_3[2], TROLL_DROPLIST_3[3]);
				end
			else
				EnergyLowInfo(id);
			end

		elseif DROP_POINT[cell].fromMob == "MOLERAT" then
			if Player[id].energy >= HUNTENER_MOLERAT then

				if Player[id].huntlevel == 0 then
					Player[id].energy = Player[id].energy - HUNTENER_MOLERAT;
					UpdateEnergyBar(id);
					SavePlayer(id);
					local drop = math.random(1,2);
					if drop == 1 then
						LogHunt(id, "MOLERAT", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255, 0, 0, 3000);
					else
						CreateItem(MOLERAT_DROPLIST_NOSKILL[1], 2, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу кротокрыса","Font_Old_10_White_Hi.TGA", 218, 165, 32, 3000);
						LogHunt(id, "MOLERAT", true, 0, MOLERAT_DROPLIST_NOSKILL[1]);
					end

				elseif Player[id].huntlevel == 1 then

					Player[id].energy = Player[id].energy - HUNTENER_MOLERAT;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop <= 3 then
						LogHunt(id, "MOLERAT", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(MOLERAT_DROPLIST_1[1], 4, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(MOLERAT_DROPLIST_1[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу кротокрыса","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_MOLERAT;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "MOLERAT", true, HUNTEXP_MOLERAT, MOLERAT_DROPLIST_1[1], MOLERAT_DROPLIST_1[2]);

				elseif Player[id].huntlevel == 2 then 

					Player[id].energy = Player[id].energy - HUNTENER_MOLERAT;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop == 1 then
						LogHunt(id, "MOLERAT", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(MOLERAT_DROPLIST_2[1], 6, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(MOLERAT_DROPLIST_2[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу кротокрыса","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_MOLERAT;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "MOLERAT", true, HUNTEXP_MOLERAT, MOLERAT_DROPLIST_2[1], MOLERAT_DROPLIST_2[2]);

				elseif Player[id].huntlevel == 3 then
					Player[id].energy = Player[id].energy - HUNTENER_MOLERAT;
					UpdateEnergyBar(id);
					CreateItem(MOLERAT_DROPLIST_3[1], 8, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					CreateItem(MOLERAT_DROPLIST_3[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					GameTextForPlayer(id, 50, 6000, "Вы разделали тушу кротокрыса","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					SavePlayer(id);
					LogHunt(id, "MOLERAT", true, 0, MOLERAT_DROPLIST_3[1], MOLERAT_DROPLIST_3[2], MOLERAT_DROPLIST_3[3]);
				end
			else
				EnergyLowInfo(id);
			end

		elseif DROP_POINT[cell].fromMob == "MEATBUG" then
			if Player[id].energy >= HUNTENER_MEATBUG then

				if Player[id].huntlevel == 0 then
					Player[id].energy = Player[id].energy - HUNTENER_MEATBUG;
					UpdateEnergyBar(id);
					SavePlayer(id);
					local drop = math.random(1,2);
					if drop == 1 then
						LogHunt(id, "MEATBUG", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли разделать жука","Font_Old_10_White_Hi.TGA", 255, 0, 0, 3000);
					else
						CreateItem(MEATBUG_DROPLIST_NOSKILL[1], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+150, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали жука","Font_Old_10_White_Hi.TGA", 218, 165, 32, 3000);
						LogHunt(id, "MEATBUG", true, 0, MEATBUG_DROPLIST_NOSKILL[1]);
					end

				elseif Player[id].huntlevel == 1 then

					Player[id].energy = Player[id].energy - HUNTENER_MEATBUG;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop <= 3 then
						LogHunt(id, "MEATBUG", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли разделать жука","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(MEATBUG_DROPLIST_1[1], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+150, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали жука","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_MEATBUG;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "MEATBUG", true, HUNTEXP_MEATBUG, MEATBUG_DROPLIST_1[1]);

				elseif Player[id].huntlevel == 2 then 

					Player[id].energy = Player[id].energy - HUNTENER_MEATBUG;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop == 1 then
						LogHunt(id, "MEATBUG", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли разделать жука","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(MEATBUG_DROPLIST_2[1], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+150, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали жука","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_MEATBUG;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "MEATBUG", true, HUNTEXP_MEATBUG, MEATBUG_DROPLIST_2[1]);

				elseif Player[id].huntlevel == 3 then
					Player[id].energy = Player[id].energy - HUNTENER_MEATBUG;
					UpdateEnergyBar(id);
					CreateItem(MEATBUG_DROPLIST_3[1], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+150, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					GameTextForPlayer(id, 50, 6000, "Вы разделали жука","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					SavePlayer(id);
					LogHunt(id, "MEATBUG", true, 0, MEATBUG_DROPLIST_3[1]);
				end
			else
				EnergyLowInfo(id);
			end

		elseif DROP_POINT[cell].fromMob == "BLOODFLY" then
			if Player[id].energy >= HUNTENER_BLOODFLY then

				if Player[id].huntlevel == 0 then
					Player[id].energy = Player[id].energy - HUNTENER_BLOODFLY;
					UpdateEnergyBar(id);
					SavePlayer(id);
					local drop = math.random(1,2);
					if drop == 1 then
						LogHunt(id, "BLOODFLY", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли разделать муху","Font_Old_10_White_Hi.TGA", 255, 0, 0, 3000);
					else
						GameTextForPlayer(id, 50, 6000, "Вы разделали муху","Font_Old_10_White_Hi.TGA", 218, 165, 32, 3000);
						LogHunt(id, "BLOODFLY", true, 0, "nil");
					end

				elseif Player[id].huntlevel == 1 then

					Player[id].energy = Player[id].energy - HUNTENER_BLOODFLY;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop <= 3 then
						LogHunt(id, "BLOODFLY", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли разделать муху","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(BLOODFLY_DROPLIST_1[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали муху","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_BLOODFLY;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "BLOODFLY", true, HUNTEXP_BLOODFLY, BLOODFLY_DROPLIST_1[1], BLOODFLY_DROPLIST_1[2]);

				elseif Player[id].huntlevel == 2 then 

					Player[id].energy = Player[id].energy - HUNTENER_BLOODFLY;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop == 1 then
						LogHunt(id, "BLOODFLY", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли разделать муху","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(BLOODFLY_DROPLIST_2[1], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(BLOODFLY_DROPLIST_2[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали муху","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_BLOODFLY;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "BLOODFLY", true, HUNTEXP_BLOODFLY, BLOODFLY_DROPLIST_2[1], BLOODFLY_DROPLIST_2[2]);

				elseif Player[id].huntlevel == 3 then
					Player[id].energy = Player[id].energy - HUNTENER_BLOODFLY;
					UpdateEnergyBar(id);
					CreateItem(BLOODFLY_DROPLIST_3[1], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					CreateItem(BLOODFLY_DROPLIST_3[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					GameTextForPlayer(id, 50, 6000, "Вы разделали муху","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					SavePlayer(id);
					LogHunt(id, "BLOODFLY", true, 0, BLOODFLY_DROPLIST_3[1], BLOODFLY_DROPLIST_3[2], BLOODFLY_DROPLIST_3[3]);
				end
			else
				EnergyLowInfo(id);
			end

		elseif DROP_POINT[cell].fromMob == "KEILER" then
			if Player[id].energy >= HUNTENER_KEILER then

				if Player[id].huntlevel == 0 then
					Player[id].energy = Player[id].energy - HUNTENER_KEILER;
					UpdateEnergyBar(id);
					SavePlayer(id);
					local drop = math.random(1,2);
					if drop == 1 then
						LogHunt(id, "KEILER", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255, 0, 0, 3000);
					else
						CreateItem(KEILER_DROPLIST_NOSKILL[1], 2, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу кабана","Font_Old_10_White_Hi.TGA", 218, 165, 32, 3000);
						LogHunt(id, "KEILER", true, 0, KEILER_DROPLIST_NOSKILL[1]);
					end

				elseif Player[id].huntlevel == 1 then

					Player[id].energy = Player[id].energy - HUNTENER_KEILER;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop <= 3 then
						LogHunt(id, "KEILER", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						DestroyNPC(DROP_POINT[cell].id);
						DROP_POINT[cell].vob = Vob.Create(HUNT_KEILER_PARAMS[1], WORLD, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]-HUNT_KEILER_PARAMS[2], DROP_POINT[cell].pos[3]);
						Vob.SetCollision(DROP_POINT[cell].vob, 0)
						CreateItem(KEILER_DROPLIST_1[1], 3, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(KEILER_DROPLIST_1[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу кабана","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_KEILER;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "KEILER", true, HUNTEXP_KEILER, KEILER_DROPLIST_1[1], KEILER_DROPLIST_1[2]);

				elseif Player[id].huntlevel == 2 then 

					Player[id].energy = Player[id].energy - HUNTENER_KEILER;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop == 1 then
						LogHunt(id, "KEILER", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						DestroyNPC(DROP_POINT[cell].id);
						DROP_POINT[cell].vob = Vob.Create(HUNT_KEILER_PARAMS[1], WORLD, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]-HUNT_KEILER_PARAMS[2], DROP_POINT[cell].pos[3]);
						Vob.SetCollision(DROP_POINT[cell].vob, 0)
						CreateItem(KEILER_DROPLIST_2[1], 5, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(KEILER_DROPLIST_2[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу кабана","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_KEILER;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "KEILER", true, HUNTEXP_KEILER, KEILER_DROPLIST_2[1], KEILER_DROPLIST_2[2]);
					----------------------------------------------------------------------------------------------------

				elseif Player[id].huntlevel == 3 then
					DestroyNPC(DROP_POINT[cell].id);
					Player[id].energy = Player[id].energy - HUNTENER_KEILER;
					UpdateEnergyBar(id);
					DROP_POINT[cell].vob = Vob.Create(HUNT_KEILER_PARAMS[1], WORLD, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]-HUNT_KEILER_PARAMS[2], DROP_POINT[cell].pos[3]);
					Vob.SetCollision(DROP_POINT[cell].vob, 0)
					CreateItem(KEILER_DROPLIST_3[1], 7, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					CreateItem(KEILER_DROPLIST_3[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					GameTextForPlayer(id, 50, 6000, "Вы разделали тушу кабана","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					SavePlayer(id);
					LogHunt(id, "KEILER", true, 0, KEILER_DROPLIST_3[1], KEILER_DROPLIST_3[2], KEILER_DROPLIST_3[3]);
				end
			else
				EnergyLowInfo(id);
			end

		elseif DROP_POINT[cell].fromMob == "SNAPPER" then
			if Player[id].energy >= HUNTENER_SNAPPER then

				if Player[id].huntlevel == 0 then
					Player[id].energy = Player[id].energy - HUNTENER_SNAPPER;
					UpdateEnergyBar(id);
					SavePlayer(id);
					local drop = math.random(1,2);
					if drop == 1 then
						LogHunt(id, "SNAPPER", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255, 0, 0, 3000);
					else
						CreateItem(SNAPPER_DROPLIST_NOSKILL[1], 2, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу снеппера","Font_Old_10_White_Hi.TGA", 218, 165, 32, 3000);
						LogHunt(id, "SNAPPER", true, 0, SNAPPER_DROPLIST_NOSKILL[1]);
					end

				elseif Player[id].huntlevel == 1 then

					Player[id].energy = Player[id].energy - HUNTENER_SNAPPER;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop <= 3 then
						LogHunt(id, "SNAPPER", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(SNAPPER_DROPLIST_1[1], 3, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(SNAPPER_DROPLIST_1[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу снеппера","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_SNAPPER;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "SNAPPER", true, HUNTEXP_SNAPPER, SNAPPER_DROPLIST_1[1], SNAPPER_DROPLIST_1[2]);

				elseif Player[id].huntlevel == 2 then 

					Player[id].energy = Player[id].energy - HUNTENER_SNAPPER;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop == 1 then
						LogHunt(id, "SNAPPER", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(SNAPPER_DROPLIST_2[1], 5, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(SNAPPER_DROPLIST_2[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу снеппера","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_SNAPPER;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "SNAPPER", true, HUNTEXP_SNAPPER, SNAPPER_DROPLIST_2[1], SNAPPER_DROPLIST_2[2]);

				elseif Player[id].huntlevel == 3 then
					Player[id].energy = Player[id].energy - HUNTENER_SNAPPER;
					UpdateEnergyBar(id);
					CreateItem(SNAPPER_DROPLIST_3[1], 7, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					CreateItem(SNAPPER_DROPLIST_3[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					GameTextForPlayer(id, 50, 6000, "Вы разделали тушу снеппера","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					SavePlayer(id);
					LogHunt(id, "SNAPPER", true, 0, SNAPPER_DROPLIST_3[1], SNAPPER_DROPLIST_3[2], SNAPPER_DROPLIST_3[3]);
				end
			else
				EnergyLowInfo(id);
			end

		elseif DROP_POINT[cell].fromMob == "SHADOWBEAST" then
			if Player[id].energy >= HUNTENER_SHADOWBEAST then

				if Player[id].huntlevel == 0 then
					Player[id].energy = Player[id].energy - HUNTENER_SHADOWBEAST;
					UpdateEnergyBar(id);
					SavePlayer(id);
					local drop = math.random(1,2);
					if drop == 1 then
						LogHunt(id, "SHADOWBEAST", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255, 0, 0, 3000);
					else
						CreateItem(SHADOWBEAST_DROPLIST_NOSKILL[1], 4, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу мракориса","Font_Old_10_White_Hi.TGA", 218, 165, 32, 3000);
						LogHunt(id, "SHADOWBEAST", true, 0, SHADOWBEAST_DROPLIST_NOSKILL[1]);
					end

				elseif Player[id].huntlevel == 1 then

					Player[id].energy = Player[id].energy - HUNTENER_SHADOWBEAST;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop <= 3 then
						LogHunt(id, "SHADOWBEAST", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						DestroyNPC(DROP_POINT[cell].id);
						DROP_POINT[cell].vob = Vob.Create(HUNT_SHADOWBEAST_PARAMS[1], WORLD, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]-HUNT_SHADOWBEAST_PARAMS[2], DROP_POINT[cell].pos[3]);
						Vob.SetCollision(DROP_POINT[cell].vob, 0)
						CreateItem(SHADOWBEAST_DROPLIST_1[1], 7, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу мракориса","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_SHADOWBEAST;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "SHADOWBEAST", true, HUNTEXP_SHADOWBEAST, SHADOWBEAST_DROPLIST_1[1], SHADOWBEAST_DROPLIST_1[2]);

				elseif Player[id].huntlevel == 2 then 

					Player[id].energy = Player[id].energy - HUNTENER_SHADOWBEAST;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop == 1 then
						LogHunt(id, "SHADOWBEAST", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						DestroyNPC(DROP_POINT[cell].id);
						DROP_POINT[cell].vob = Vob.Create(HUNT_SHADOWBEAST_PARAMS[1], WORLD, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]-HUNT_SHADOWBEAST_PARAMS[2], DROP_POINT[cell].pos[3]);
						Vob.SetCollision(DROP_POINT[cell].vob, 0)
						CreateItem(SHADOWBEAST_DROPLIST_2[1], 11, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)

						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу мракориса","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_SHADOWBEAST;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "SHADOWBEAST", true, HUNTEXP_SHADOWBEAST, SHADOWBEAST_DROPLIST_2[1], SHADOWBEAST_DROPLIST_2[2]);
					----------------------------------------------------------------------------------------------------

				elseif Player[id].huntlevel == 3 then
					DestroyNPC(DROP_POINT[cell].id);
					Player[id].energy = Player[id].energy - HUNTENER_SHADOWBEAST;
					UpdateEnergyBar(id);
					DROP_POINT[cell].vob = Vob.Create(HUNT_SHADOWBEAST_PARAMS[1], WORLD, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]-HUNT_SHADOWBEAST_PARAMS[2], DROP_POINT[cell].pos[3]);
					Vob.SetCollision(DROP_POINT[cell].vob, 0)
					CreateItem(SHADOWBEAST_DROPLIST_3[1], 15, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					CreateItem(SHADOWBEAST_DROPLIST_3[2], 2, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					GameTextForPlayer(id, 50, 6000, "Вы разделали тушу мракориса","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					SavePlayer(id);
					LogHunt(id, "SHADOWBEAST", true, 0, SHADOWBEAST_DROPLIST_3[1], SHADOWBEAST_DROPLIST_3[2], SHADOWBEAST_DROPLIST_3[3]);
				end
			else
				EnergyLowInfo(id);
			end

		elseif DROP_POINT[cell].fromMob == "WARAN" then
			if Player[id].energy >= HUNTENER_WARAN then

				if Player[id].huntlevel == 0 then
					Player[id].energy = Player[id].energy - HUNTENER_WARAN;
					UpdateEnergyBar(id);
					SavePlayer(id);
					local drop = math.random(1,2);
					if drop == 1 then
						LogHunt(id, "WARAN", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255, 0, 0, 3000);
					else
						CreateItem(WARAN_DROPLIST_NOSKILL[1], 2, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу варана","Font_Old_10_White_Hi.TGA", 218, 165, 32, 3000);
						LogHunt(id, "WARAN", true, 0, WARAN_DROPLIST_NOSKILL[1]);
					end

				elseif Player[id].huntlevel == 1 then

					Player[id].energy = Player[id].energy - HUNTENER_WARAN;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop <= 3 then
						LogHunt(id, "WARAN", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(WARAN_DROPLIST_1[1], 3, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(WARAN_DROPLIST_1[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу варана","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_WARAN;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "WARAN", true, HUNTEXP_WARAN, WARAN_DROPLIST_1[1], WARAN_DROPLIST_1[2]);

				elseif Player[id].huntlevel == 2 then 

					Player[id].energy = Player[id].energy - HUNTENER_WARAN;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop == 1 then
						LogHunt(id, "WARAN", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(WARAN_DROPLIST_2[1], 5, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(WARAN_DROPLIST_2[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу варана","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_WARAN;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "WARAN", true, HUNTEXP_WARAN, WARAN_DROPLIST_2[1], WARAN_DROPLIST_2[2]);

				elseif Player[id].huntlevel == 3 then
					Player[id].energy = Player[id].energy - HUNTENER_WARAN;
					UpdateEnergyBar(id);
					CreateItem(WARAN_DROPLIST_3[1], 7, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					CreateItem(WARAN_DROPLIST_3[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					GameTextForPlayer(id, 50, 6000, "Вы разделали тушу варана","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					SavePlayer(id);
					LogHunt(id, "WARAN", true, 0, WARAN_DROPLIST_3[1], WARAN_DROPLIST_3[2], WARAN_DROPLIST_3[3]);
				end
			else
				EnergyLowInfo(id);
			end

		elseif DROP_POINT[cell].fromMob == "GIANT_RAT" then
			if Player[id].energy >= HUNTENER_GIANT_RAT then

				if Player[id].huntlevel == 0 then
					Player[id].energy = Player[id].energy - HUNTENER_GIANT_RAT;
					UpdateEnergyBar(id);
					SavePlayer(id);
					local drop = math.random(1,2);
					if drop == 1 then
						LogHunt(id, "GIANT_RAT", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255, 0, 0, 3000);
					else
						CreateItem(GIANT_RAT_DROPLIST_NOSKILL[1], 2, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу крысы","Font_Old_10_White_Hi.TGA", 218, 165, 32, 3000);
						LogHunt(id, "GIANT_RAT", true, 0, GIANT_RAT_DROPLIST_NOSKILL[1]);
					end

				elseif Player[id].huntlevel == 1 then

					Player[id].energy = Player[id].energy - HUNTENER_GIANT_RAT;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop <= 3 then
						LogHunt(id, "GIANT_RAT", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(GIANT_RAT_DROPLIST_1[1], 3, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу крысы","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_GIANT_RAT;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "GIANT_RAT", true, HUNTEXP_GIANT_RAT, GIANT_RAT_DROPLIST_1[1], GIANT_RAT_DROPLIST_1[2]);

				elseif Player[id].huntlevel == 2 then 

					Player[id].energy = Player[id].energy - HUNTENER_GIANT_RAT;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop == 1 then
						LogHunt(id, "GIANT_RAT", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(GIANT_RAT_DROPLIST_2[1], 5, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу крысы","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_GIANT_RAT;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "GIANT_RAT", true, HUNTEXP_GIANT_RAT, GIANT_RAT_DROPLIST_2[1], GIANT_RAT_DROPLIST_2[2]);

				elseif Player[id].huntlevel == 3 then
					Player[id].energy = Player[id].energy - HUNTENER_GIANT_RAT;
					UpdateEnergyBar(id);
					CreateItem(GIANT_RAT_DROPLIST_3[1], 7, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					GameTextForPlayer(id, 50, 6000, "Вы разделали тушу крысы","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					SavePlayer(id);
					LogHunt(id, "GIANT_RAT", true, 0, GIANT_RAT_DROPLIST_3[1], GIANT_RAT_DROPLIST_3[2], GIANT_RAT_DROPLIST_3[3]);
				end
			else
				EnergyLowInfo(id);
			end

		elseif DROP_POINT[cell].fromMob == "MINECRAWLER" then
			if Player[id].energy >= HUNTENER_MINECRAWLER then

				if Player[id].huntlevel == 0 then
					Player[id].energy = Player[id].energy - HUNTENER_MINECRAWLER;
					UpdateEnergyBar(id);
					SavePlayer(id);
					LogHunt(id, "MINECRAWLER", false, 0);
					GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255, 0, 0, 3000);

				elseif Player[id].huntlevel == 1 then

					Player[id].energy = Player[id].energy - HUNTENER_MINECRAWLER;
					UpdateEnergyBar(id);
					LogHunt(id, "MINECRAWLER", false, 0);
					GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_MINECRAWLER;
					UpdateHuntLevel(id);
					SaveHunt(id);

				elseif Player[id].huntlevel == 2 then 

					Player[id].energy = Player[id].energy - HUNTENER_MINECRAWLER;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop == 1 then
						LogHunt(id, "MINECRAWLER", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(MINECRAWLER_DROPLIST_2[1], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу ползуна","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_MINECRAWLER;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "MINECRAWLER", true, HUNTEXP_MINECRAWLER, MINECRAWLER_DROPLIST_2[1], MINECRAWLER_DROPLIST_2[2]);

				elseif Player[id].huntlevel == 3 then
					Player[id].energy = Player[id].energy - HUNTENER_MINECRAWLER;
					UpdateEnergyBar(id);
					CreateItem(MINECRAWLER_DROPLIST_3[1], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					CreateItem(MINECRAWLER_DROPLIST_3[2], 1, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					GameTextForPlayer(id, 50, 6000, "Вы разделали тушу ползуна","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					SavePlayer(id);
					LogHunt(id, "MINECRAWLER", true, 0, MINECRAWLER_DROPLIST_3[1], MINECRAWLER_DROPLIST_3[2], MINECRAWLER_DROPLIST_3[3]);
				end
			else
				EnergyLowInfo(id);
			end

		elseif DROP_POINT[cell].fromMob == "LURKER" then
			if Player[id].energy >= HUNTENER_LURKER then

				if Player[id].huntlevel == 0 then
					Player[id].energy = Player[id].energy - HUNTENER_LURKER;
					UpdateEnergyBar(id);
					SavePlayer(id);
					local drop = math.random(1,2);
					if drop == 1 then
						LogHunt(id, "LURKER", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255, 0, 0, 3000);
					else
						CreateItem(LURKER_DROPLIST_NOSKILL[1], 4, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу шныга","Font_Old_10_White_Hi.TGA", 218, 165, 32, 3000);
						LogHunt(id, "LURKER", true, 0, LURKER_DROPLIST_NOSKILL[1]);
					end

				elseif Player[id].huntlevel == 1 then

					Player[id].energy = Player[id].energy - HUNTENER_LURKER;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop <= 3 then
						LogHunt(id, "LURKER", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(LURKER_DROPLIST_1[1], 7, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(LURKER_DROPLIST_1[2], 2, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу шныга","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_LURKER;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "LURKER", true, HUNTEXP_LURKER, LURKER_DROPLIST_1[1], LURKER_DROPLIST_1[2]);

				elseif Player[id].huntlevel == 2 then 

					Player[id].energy = Player[id].energy - HUNTENER_LURKER;
					UpdateEnergyBar(id);
					local drop = math.random(1, 10);
					if drop == 1 then
						LogHunt(id, "LURKER", false, 0);
						GameTextForPlayer(id, 50, 6000, "Вы не смогли освежевать тушу","Font_Old_10_White_Hi.TGA", 255,0,0, 3000);
					else
						CreateItem(LURKER_DROPLIST_2[1], 11, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						CreateItem(LURKER_DROPLIST_2[2], 2, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
						
						GameTextForPlayer(id, 50, 6000, "Вы разделали тушу шныга","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					end
					SavePlayer(id);
					Player[id].huntexp = Player[id].huntexp + HUNTEXP_LURKER;
					UpdateHuntLevel(id);
					SaveHunt(id);
					LogHunt(id, "LURKER", true, HUNTEXP_LURKER, LURKER_DROPLIST_2[1], LURKER_DROPLIST_2[2]);

				elseif Player[id].huntlevel == 3 then
					Player[id].energy = Player[id].energy - HUNTENER_LURKER;
					UpdateEnergyBar(id);
					CreateItem(LURKER_DROPLIST_3[1], 15, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					CreateItem(LURKER_DROPLIST_3[2], 2, DROP_POINT[cell].pos[1], DROP_POINT[cell].pos[2]+100, DROP_POINT[cell].pos[3], WORLD, 0, 0, 0, 1)
					
					GameTextForPlayer(id, 50, 6000, "Вы разделали тушу шныга","Font_Old_10_White_Hi.TGA", 218,165,32, 3000);
					SavePlayer(id);
					LogHunt(id, "LURKER", true, 0, LURKER_DROPLIST_3[1], LURKER_DROPLIST_3[2], LURKER_DROPLIST_3[3]);
				end
			else
				EnergyLowInfo(id);
			end

		--------------------------
		end
	end
end


function _removeDeadBodies()

	if HUNT_REMOVE == true then
		for i = 1, 300 do
			if DROP_POINT[i].status == 3 then
				if DROP_POINT[i].vob ~= nil then
					Vob.Destroy(DROP_POINT[i].vob);
				end
				DROP_POINT[i].status = 0;
				DROP_POINT[i].vob = nil;
				DROP_POINT[i].fromMob = nil;
				DROP_POINT[i].pos = {};
				DROP_POINT[i].id = nil;
			end
		end
	end
end

function _timerHunting()
	
	local hour, minute = GetTime();
	if hour == 0 and minute < 1 then
		HUNT_REMOVE = true;
		_removeDeadBodies()
	else
		HUNT_REMOVE = false;
	end

end

function SaveHunt(playerid)
	
	local file = io.open("Database/Players/Hunt/"..Player[playerid].nickname..".txt", "w+");
	file:write(Player[playerid].huntlevel.."\n");
	file:write(Player[playerid].huntexp);
	file:close();
 
end

function ReadHunt(playerid)

	local file = io.open("Database/Players/Hunt/"..Player[playerid].nickname..".txt", "r");
	if file then

		tempvar = file:read("*l");
		local result, d = sscanf(tempvar,"d");
		if result == 1 then
			Player[playerid].huntlevel = d;
		end

		tempvar = file:read("*l");
		local result, d = sscanf(tempvar,"d");
		if result == 1 then
			Player[playerid].huntexp = d;
		end

		file:close();
	end

end